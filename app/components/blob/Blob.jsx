"use client";

import { useEffect, useState } from "react";
import { motion } from "framer-motion";

export default function Blob({ fill }) {
  const blobs = [
    "M36.5,-27.8C46.2,-17,52.1,-1.8,51,15.2C50,32.2,41.8,51.1,26.5,60.6C11.1,70.2,-11.5,70.4,-28.2,61.3C-44.9,52.2,-55.7,33.7,-62.2,12.2C-68.7,-9.3,-70.9,-33.8,-59.8,-44.9C-48.7,-56.1,-24.4,-53.9,-5.5,-49.6C13.4,-45.2,26.8,-38.6,36.5,-27.8Z",
    "M52.5,-41.9C64.5,-26.8,68.2,-5.2,62.5,12.1C56.8,29.4,41.7,42.3,25.2,49C8.7,55.6,-9.2,55.9,-29,50.2C-48.8,44.5,-70.5,32.8,-76.3,15.2C-82.1,-2.4,-72,-25.9,-56.6,-41.7C-41.3,-57.5,-20.6,-65.7,-0.2,-65.5C20.2,-65.4,40.5,-56.9,52.5,-41.9Z",
    "M35.8,-31.2C44.3,-17.9,47.5,-3.2,47.7,16.8C47.8,36.8,44.9,62,32.4,68.5C19.9,75,-2.2,62.8,-19.2,50.5C-36.3,38.3,-48.2,26,-54.4,9.4C-60.6,-7.2,-61,-28.1,-51,-41.7C-41,-55.4,-20.5,-61.7,-3.4,-59C13.7,-56.3,27.3,-44.5,35.8,-31.2Z",
    "M39.7,-30.7C52.3,-15.8,64.1,0.7,62.8,17.4C61.4,34.1,47,50.9,28.5,60.2C10,69.6,-12.6,71.3,-32.9,63.4C-53.2,55.5,-71.2,37.9,-75.9,17.3C-80.6,-3.3,-72,-26.9,-57.1,-42.3C-42.3,-57.7,-21.1,-64.9,-3.8,-61.9C13.5,-58.8,27.1,-45.6,39.7,-30.7Z",
    "M52.4,-43.2C65.8,-24.9,73.2,-3.3,67.5,12.9C61.8,29.1,43.1,39.7,25,46.2C7,52.7,-10.4,55.1,-23.5,48.8C-36.7,42.5,-45.8,27.5,-52.9,8.6C-60,-10.3,-65.1,-33.2,-56,-50.5C-46.8,-67.7,-23.4,-79.5,-2,-77.9C19.5,-76.3,38.9,-61.4,52.4,-43.2Z",
    "M65.7,-51.9C80.1,-34.3,83.3,-7.3,76.5,15.5C69.7,38.3,53,56.9,33.4,64.5C13.7,72.2,-8.9,68.9,-25.2,58.6C-41.5,48.4,-51.4,31.2,-58.4,10.5C-65.3,-10.1,-69.2,-34.2,-59,-50.9C-48.8,-67.5,-24.4,-76.7,0.6,-77.2C25.6,-77.7,51.3,-69.5,65.7,-51.9Z",
    "M63.9,-51.9C78.9,-32.1,84.6,-5.7,76.9,13.3C69.1,32.3,48,44,27,52.8C6.1,61.6,-14.7,67.6,-32.6,61.4C-50.4,55.1,-65.5,36.8,-68.9,17.1C-72.3,-2.6,-64.1,-23.6,-50.7,-43.1C-37.3,-62.6,-18.7,-80.5,2.9,-82.8C24.4,-85.1,48.8,-71.7,63.9,-51.9Z",
    "M63.1,-51.7C75.6,-34.6,75.4,-8.7,68.2,12.7C61,34.1,46.9,51.1,27.4,62.8C7.8,74.5,-17.1,80.9,-31.9,71.7C-46.7,62.4,-51.4,37.6,-53.3,16C-55.1,-5.6,-54.2,-24,-44.8,-40.4C-35.5,-56.7,-17.7,-70.9,3.8,-73.9C25.3,-76.9,50.6,-68.7,63.1,-51.7Z",
    "M47,-36.1C60.8,-20.2,71.8,-0.6,70.3,20.1C68.8,40.8,54.8,62.7,33.8,74.5C12.7,86.3,-15.2,88,-37.7,77.5C-60.2,67,-77.3,44.3,-81.6,20.1C-86,-4.1,-77.7,-29.7,-62,-46.1C-46.3,-62.5,-23.1,-69.6,-3.3,-67C16.6,-64.4,33.2,-52.1,47,-36.1Z",
    "M60.2,-51.4C68.4,-37.8,58.7,-13.3,51.6,9.4C44.6,32.2,40.1,53.2,26.2,63.3C12.3,73.4,-11.2,72.7,-31.4,63.6C-51.6,54.4,-68.5,37,-75.3,15C-82.1,-7,-78.7,-33.5,-64.4,-48.5C-50.2,-63.5,-25.1,-66.9,0.5,-67.3C26,-67.7,52.1,-65,60.2,-51.4Z",
    "M50.2,-45.2C60,-27.7,59.5,-7.1,55.4,13.5C51.4,34.2,43.9,54.9,29.7,61.7C15.6,68.5,-5.3,61.3,-22,51.2C-38.7,41,-51.2,27.8,-53.5,13.4C-55.9,-0.9,-47.9,-16.4,-37.3,-34.1C-26.7,-51.8,-13.3,-71.6,3.4,-74.3C20.2,-77,40.4,-62.7,50.2,-45.2Z",
    "M61.5,-53.5C71,-37.2,63.9,-12.1,55.5,7.9C47.2,28,37.5,43,23,51.3C8.5,59.7,-10.9,61.4,-31.7,55.4C-52.5,49.4,-74.7,35.8,-81.2,16.1C-87.7,-3.7,-78.5,-29.4,-62.3,-47.3C-46.2,-65.1,-23.1,-75,1.5,-76.2C26,-77.3,52.1,-69.8,61.5,-53.5Z",
    "M43.4,-33.4C56.9,-17.6,69.1,0.5,66,15.5C63,30.6,44.7,42.7,25.1,52.1C5.5,61.6,-15.3,68.4,-30.8,61.8C-46.2,55.1,-56.2,35.1,-62.9,12.5C-69.5,-10.1,-72.8,-35.4,-61.7,-50.6C-50.7,-65.8,-25.3,-71,-5.2,-66.8C14.9,-62.6,29.8,-49.2,43.4,-33.4Z",
    "M42.9,-29.6C56.7,-17,69.7,1,66,14.3C62.3,27.6,42,36.4,24.5,41C7,45.7,-7.8,46.3,-20.7,40.9C-33.6,35.5,-44.5,24.1,-47.6,10.8C-50.7,-2.4,-45.8,-17.5,-36.5,-29.2C-27.3,-40.8,-13.6,-49,0.5,-49.4C14.6,-49.8,29.1,-42.3,42.9,-29.6Z",
    "M61.3,-49.7C75.3,-31.3,79.8,-6,74.2,16.3C68.6,38.5,52.9,57.9,34,64.8C15,71.7,-7.1,66.2,-27.6,56.6C-48.2,47,-67.1,33.3,-74.7,13.3C-82.3,-6.8,-78.5,-33.2,-64.2,-51.7C-49.8,-70.2,-24.9,-80.7,-0.6,-80.2C23.6,-79.7,47.3,-68.1,61.3,-49.7Z",
    "M45.2,-34.3C59.2,-18.5,71.7,0.4,67.9,15C64.2,29.6,44.2,39.9,25.2,47.1C6.1,54.3,-11.9,58.3,-31.4,53.4C-50.9,48.6,-71.7,34.9,-73.9,18.8C-76,2.7,-59.3,-15.7,-43.9,-31.8C-28.5,-47.9,-14.2,-61.7,0.7,-62.3C15.6,-62.8,31.2,-50.1,45.2,-34.3Z",
    "M53.5,-40.9C66.9,-26,73.4,-3.9,68.1,13.9C62.7,31.7,45.4,45.1,26.8,53C8.2,61,-11.8,63.5,-32.7,57.4C-53.7,51.4,-75.6,36.8,-79,18.8C-82.5,0.8,-67.6,-20.6,-51.3,-36.1C-35.1,-51.6,-17.5,-61.3,1.3,-62.3C20.1,-63.3,40.2,-55.7,53.5,-40.9Z",
  ];

  const [currentIndex, setCurrentIndex] = useState(0);

  useEffect(() => {
    const interval = setInterval(() => {
      setCurrentIndex((prev) => (prev + 1) % blobs.length);
    }, 1500); // Match this with the animation duration

    return () => clearInterval(interval);
  }, []);

  console.log(currentIndex);

  return (
    <svg viewBox="0 0 200 200" width={400} height={400}>
      <motion.path
        key={currentIndex} // This forces a fresh animation when index changes
        fill={fill}
        transform="translate(100 100)"
        initial={{ d: blobs[currentIndex] }}
        animate={{ d: blobs[(currentIndex + 1) % blobs.length] }}
        transition={{
          duration: 1.5,
          ease: "easeInOut",
          repeat: 0, // Ensure it doesn't try to repeat
        }}
      />
    </svg>
  );
}
