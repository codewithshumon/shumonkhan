"use client";

import { useEffect, useState } from "react";
import { motion } from "framer-motion";

export default function Blob({ fill }) {
  const blobs = [
    "M42.7,-12.5C50.5,10.3,48.8,37.6,33.6,49.3C18.5,61.1,-10.2,57.3,-33.6,41.4C-56.9,25.6,-75,-2.3,-68.5,-23.2C-62,-44.2,-31,-58.1,-6.8,-55.9C17.4,-53.7,34.8,-35.3,42.7,-12.5Z",
    "M59.3,-17.5C68.8,9.9,62.8,44.2,43.6,57.6C24.3,71,-8.3,63.6,-26.6,47.7C-45,31.7,-49.2,7.2,-42.4,-16.6C-35.5,-40.3,-17.8,-63.4,3.6,-64.5C24.9,-65.7,49.8,-45,59.3,-17.5Z",
    "M70,-22.5C78.8,4.4,65.8,38.6,43.8,52.9C21.7,67.1,-9.5,61.5,-33.1,44.6C-56.6,27.7,-72.7,-0.6,-65.9,-24.7C-59.1,-48.8,-29.6,-68.8,0.5,-69C30.6,-69.1,61.2,-49.5,70,-22.5Z",
    "M60.3,-22.3C65.8,-2.7,49.4,21.3,29.3,34.6C9.2,47.8,-14.6,50.3,-32.5,38.8C-50.3,27.2,-62.2,1.5,-55.8,-19.3C-49.4,-40.1,-24.7,-56,1.3,-56.5C27.4,-56.9,54.8,-41.8,60.3,-22.3Z",
    "M50.4,-18.7C57.3,4.8,49.3,30.8,33.3,41.3C17.4,51.8,-6.5,46.8,-22.5,34.3C-38.5,21.9,-46.7,2,-41.7,-18.9C-36.6,-39.9,-18.3,-62,1.7,-62.5C21.8,-63.1,43.5,-42.1,50.4,-18.7Z",
    "M45.5,-14.4C54.1,11.9,53,41.6,35.8,55.7C18.5,69.8,-14.9,68.1,-33.7,52.9C-52.5,37.7,-56.7,8.9,-48.7,-16.5C-40.7,-42,-20.3,-64.2,-1,-63.9C18.4,-63.6,36.8,-40.7,45.5,-14.4Z",
    "M57,-15.7C63.6,1.9,51.7,28.3,30.6,44.1C9.5,59.9,-20.8,65.1,-38,52.5C-55.1,40,-59.3,9.7,-50.8,-10.5C-42.3,-30.7,-21.1,-40.8,2,-41.5C25.2,-42.1,50.3,-33.3,57,-15.7Z",
    "M49,-16.6C58.1,12.1,56.3,43.6,36.6,60.2C16.9,76.9,-20.7,78.6,-40.4,62.6C-60.2,46.7,-62,13,-52.2,-16.6C-42.5,-46.2,-21.3,-71.6,-0.7,-71.4C19.9,-71.2,39.9,-45.3,49,-16.6Z",
    "M46.2,-17.6C54.3,10,51.5,38.5,34.8,51.4C18.1,64.4,-12.4,61.8,-29.2,47.8C-45.9,33.8,-48.8,8.5,-41.7,-17.8C-34.5,-44,-17.3,-71.3,0.9,-71.6C19,-71.9,38.1,-45.2,46.2,-17.6Z",
    "M70,-22.5C78.8,4.4,65.8,38.6,43.8,52.9C21.7,67.1,-9.5,61.5,-33.1,44.6C-56.6,27.7,-72.7,-0.6,-65.9,-24.7C-59.1,-48.8,-29.6,-68.8,0.5,-69C30.6,-69.1,61.2,-49.5,70,-22.5Z",
    "M60.3,-22.3C65.8,-2.7,49.4,21.3,29.3,34.6C9.2,47.8,-14.6,50.3,-32.5,38.8C-50.3,27.2,-62.2,1.5,-55.8,-19.3C-49.4,-40.1,-24.7,-56,1.3,-56.5C27.4,-56.9,54.8,-41.8,60.3,-22.3Z",
    "M50.4,-18.7C57.3,4.8,49.3,30.8,33.3,41.3C17.4,51.8,-6.5,46.8,-22.5,34.3C-38.5,21.9,-46.7,2,-41.7,-18.9C-36.6,-39.9,-18.3,-62,1.7,-62.5C21.8,-63.1,43.5,-42.1,50.4,-18.7Z",
    "M45.5,-14.4C54.1,11.9,53,41.6,35.8,55.7C18.5,69.8,-14.9,68.1,-33.7,52.9C-52.5,37.7,-56.7,8.9,-48.7,-16.5C-40.7,-42,-20.3,-64.2,-1,-63.9C18.4,-63.6,36.8,-40.7,45.5,-14.4Z",
    "M57,-15.7C63.6,1.9,51.7,28.3,30.6,44.1C9.5,59.9,-20.8,65.1,-38,52.5C-55.1,40,-59.3,9.7,-50.8,-10.5C-42.3,-30.7,-21.1,-40.8,2,-41.5C25.2,-42.1,50.3,-33.3,57,-15.7Z",
    "M49,-16.6C58.1,12.1,56.3,43.6,36.6,60.2C16.9,76.9,-20.7,78.6,-40.4,62.6C-60.2,46.7,-62,13,-52.2,-16.6C-42.5,-46.2,-21.3,-71.6,-0.7,-71.4C19.9,-71.2,39.9,-45.3,49,-16.6Z",
    "M46.2,-17.6C54.3,10,51.5,38.5,34.8,51.4C18.1,64.4,-12.4,61.8,-29.2,47.8C-45.9,33.8,-48.8,8.5,-41.7,-17.8C-34.5,-44,-17.3,-71.3,0.9,-71.6C19,-71.9,38.1,-45.2,46.2,-17.6Z",
  ];

  const [currentIndex, setCurrentIndex] = useState(0);

  useEffect(() => {
    const interval = setInterval(() => {
      setCurrentIndex((prev) => (prev + 1) % blobs.length);
    }, 1500); // Match this with the animation duration

    return () => clearInterval(interval);
  }, []);

  console.log(currentIndex);

  return (
    <svg viewBox="0 0 200 200" width={300} height={300}>
      <motion.path
        key={currentIndex} // This forces a fresh animation when index changes
        fill={fill}
        transform="translate(100 100)"
        initial={{ d: blobs[currentIndex] }}
        animate={{ d: blobs[(currentIndex + 1) % blobs.length] }}
        transition={{
          duration: 1.5,
          ease: "easeInOut",
          repeat: 0, // Ensure it doesn't try to repeat
        }}
      />
    </svg>
  );
}
